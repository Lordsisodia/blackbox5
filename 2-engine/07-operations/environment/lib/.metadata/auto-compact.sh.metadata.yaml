# Auto-Compaction System Metadata
# Artifact: Auto-Compact
# Type: script

id: "auto-compact-script"
type: "script"
name: "Auto-Compact"
category: "memory-management"
version: "1.0.0"

# Location
path: "2-engine/07-operations/environment/lib/auto-compact.sh"
created: "2026-01-14"
modified: "2026-01-20"

# Content
description: |
  Automatic memory and context compression when token limits are reached. Monitors
  working memory, extended memory, and archival memory tiers with configurable
  thresholds. Provides intelligent compression that preserves markdown headers,
  code blocks, and first/last lines while removing redundant content.

  Key capabilities:
  - Configurable memory limits (working: 10MB, extended: 500MB, archival: 5GB)
  - Token counting and estimation (200K token limit)
  - Automatic compaction with backup
  - Smart priority rules (preserve headers, code blocks, first/last lines)
  - Multi-tier memory management
  - JSON configuration with history tracking
  - Integration with Blackbox runtime system

tags:
  - "memory"
  - "compression"
  - "tokens"
  - "phase3"
  - "automation"
  - "context"

keywords:
  - "compact"
  - "compress"
  - "memory"
  - "token"
  - "limit"
  - "context"

# Relationships
depends_on:
  - id: "circuit-breaker"
    type: "library"

used_by:
  - id: "ralph-runtime"
    type: "library"
  - id: "orchestrator-agent-v1"
    type: "agent"

relates_to:
  - id: "circuit-breaker"
    type: "library"
    relationship: "integrates"

# Classification
phase: 3
layer: "execution"

# Status
status: "active"
stability: "high"

# Ownership
owner: "core-team"
maintainer: "ai-system"

# Documentation
docs:
  primary: "2-engine/07-operations/environment/lib/auto-compact.sh"
  examples: "2-engine/07-operations/.runtime/compact.log"

# Metrics
usage_count: 120
last_used: "2026-01-20"
success_rate: 0.94
