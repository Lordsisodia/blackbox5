# Exit Decision Engine Metadata
# Artifact: Exit Decision Engine
# Type: script

id: "exit-decision-engine-script"
type: "script"
name: "Exit Decision Engine"
category: "circuit-breaker"
version: "1.0.0"

# Location
path: "2-engine/07-operations/environment/lib/exit_decision_engine.sh"
created: "2026-01-14"
modified: "2026-01-20"

# Content
description: |
  Part of Blackbox Circuit Breaker implementation. Makes intelligent decisions
  about when to stop autonomous execution based on confidence, completion,
  error patterns, and stagnation detection. Integrates with circuit-breaker
  and response-analyzer to provide comprehensive exit decision logic.

  Decision factors:
  - Minimum confidence threshold (default: 70%)
  - Minimum completion threshold (default: 80%)
  - Maximum error count (default: 5)
  - Stagnation loop detection (default: 3 loops)

  Decision outputs:
  - CONTINUE: Safe to continue execution
  - PAUSE_FOR_REVIEW: Needs human review
  - ERROR_RECOVERY: Too many errors, attempt recovery
  - TASK_COMPLETE: Task successfully completed
  - MAX_LOOPS_REACHED: Circuit breaker triggered

  Key capabilities:
  - Multi-factor decision making
  - Configurable thresholds via YAML
  - State persistence with history tracking
  - Integration with circuit-breaker and response-analyzer
  - Decision history and analytics

tags:
  - "circuit-breaker"
  - "exit"
  - "decision"
  - "phase3"
  - "safety"
  - "autonomous"

keywords:
  - "exit"
  - "decision"
  - "stop"
  - "confidence"
  - "completion"
  - "stagnation"

# Relationships
depends_on:
  - id: "circuit-breaker"
    type: "library"
  - id: "response-analyzer"
    type: "library"

used_by:
  - id: "ralph-runtime"
    type: "library"
  - id: "circuit-breaker"
    type: "library"

relates_to:
  - id: "circuit-breaker"
    type: "library"
    relationship: "integrates"
  - id: "response-analyzer"
    type: "library"
    relationship: "uses"

# Classification
phase: 3
layer: "execution"

# Status
status: "active"
stability: "high"

# Ownership
owner: "core-team"
maintainer: "ai-system"

# Documentation
docs:
  primary: "2-engine/07-operations/environment/lib/exit_decision_engine.sh"
  examples: "2-engine/07-operations/.ralph/exit-state.json"

# Metrics
usage_count: 160
last_used: "2026-01-20"
success_rate: 0.96
