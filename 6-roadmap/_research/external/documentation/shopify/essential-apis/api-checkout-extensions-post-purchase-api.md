---
{
  "fetch": {
    "url": "https://shopify.dev/api/checkout-extensions/post-purchase/api",
    "fetched_at": "2026-02-10T13:39:51.526834",
    "status": 200,
    "size_bytes": 284273
  },
  "metadata": {
    "title": "Post-purchase extension points API",
    "source": "shopify",
    "category": "polaris-web-components",
    "section": "post-purchase",
    "component": "api"
  }
}
---

# Post-purchase extension points API

# Post-purchase extension points APIAsk assistant

## [Anchor to ExtensionPoints](/docs/api/checkout-extensions/post-purchase/api#extensionpoints)ExtensionPointsPost-purchase checkout extensions allow developers and Plus merchants to add a post-purchase page directly into the Shopify checkout.

The page appears after the order is confirmed, but before the **Order status** page.

Post-purchase checkout extensions can use the `ShouldRender` and `Render` extension points.

For more information, refer to the [post-purchase checkout extensions overview](/docs/apps/build/checkout/product-offers#post-purchase-product-offers).| Name | Type | Description || Checkout::PostPurchase::Render | `[RenderExtension](#renderextension)<[PostPurchaseRenderApi](#postpurchaserenderapi)<Imported>, AllComponents>` | The `Render` extension point is used to render the section in the post-purchase page.   Also, it provides additional functionality, such as communicating with Shopify to add items to the initial purchase. || Checkout::PostPurchase::ShouldRender | `(api: [PostPurchaseShouldRenderApi](#postpurchaseshouldrenderapi)<Imported>) => PostPurchaseShouldRenderResult<Imported>` | The `ShouldRender` extension point is used to determine whether a post-purchase page should be shown to the customer.   It also allows data to be pre-cached and used when the page renders. |### [Anchor to PostPurchaseShouldRenderApi](/docs/api/checkout-extensions/post-purchase/api#postpurchaseshouldrenderapi)PostPurchaseShouldRenderApiInput given to the ShouldRender extension point (Checkout::PostPurchase::ShouldRender).| Name | Type | Description || inputData | `[InputData](#inputdata)` | Input data given to the extension point. || storage | `[Storage](#storage)` | General purpose storage for extensions. |### [Anchor to RenderExtension](/docs/api/checkout-extensions/post-purchase/api#renderextension)RenderExtensionA type of extension point that is capable of rendering UI into Checkout

natively. This type of extension point receives an object to manipulate

the UI as its first argument, and additional data and methods as a second

argument. The object that can manipulate the UI is referred to as a `RemoteRoot`,

and is provided by the [remote-ui library](https://github.com/Shopify/remote-dom/tree/remote-ui/packages/core)

on which UI Extensions' rendering capabilities are built.| Type | Description || `(root: RemoteRoot<AllowedComponents, true>, input: Input): [RenderResult](#renderresult)<Input> | void` | Input type for RenderExtension. |### [Anchor to RenderResult](/docs/api/checkout-extensions/post-purchase/api#renderresult)RenderResultThe output expected from the ShouldRender extension point.| Name | Type | Description || update? | `(input: Partial<Input<Autocomplete>>) => void` | Whether the post-purchase page is requested. |### [Anchor to PostPurchaseRenderApi](/docs/api/checkout-extensions/post-purchase/api#postpurchaserenderapi)PostPurchaseRenderApiInput given to the render extension point (Checkout::PostPurchase::Render).| Name | Type | Description || inputData | `[InputData](#inputdata)` | Input data given to the extension point. || storage | `[Storage](#storage)` | General purpose storage for extensions. || calculateChangeset | `(changeset: Readonly<[Changeset](#changeset)> | string) => Promise<[CalculateChangesetUnprocessedResult](#calculatechangesetunprocessedresult) | [CalculateChangesetProcessedResult](#calculatechangesetprocessedresult)>` | Returns the calculations that would result from the provided changeset being applied. Used to provide cost-clarity for buyers. || applyChangeset | `(changeset: string, options: [ApplyChangesetOptions](#applychangesetoptions)<>) => Promise<[ApplyChangesetResult](#applychangesetresult)>` | Requests a changeset to be applied to the initial purchase, and to charge the buyer with the difference in total price, if any. || done | `() => Promise<void>` | Indicates that the extension has finished running. Redirects customers to the **Order status** page. |### [Anchor to ApplyChangesetResult](/docs/api/checkout-extensions/post-purchase/api#applychangesetresult)ApplyChangesetResultRequests a changeset to be applied to the initial purchase,

and to charge the buyer with the difference in total price if any.| Name | Type | Description || errors | `[ChangesetError](#changeseterror)[]` | Represents an error occurred while calculating or applying a changeset. || status | `"processed" | "partially_processed" | "unprocessed"` | An enum representing the result of attempting to apply or calculate a changeset. || changesetApplicationsRemaining | `number` | How many changesets can still be applied to the initial purchase. |### [Anchor to ApplyChangesetOptions](/docs/api/checkout-extensions/post-purchase/api#applychangesetoptions)ApplyChangesetOptions| Name | Type | Description || buyerConsentToSubscriptions? | `boolean` |  |### [Anchor to CalculateChangesetProcessedResult](/docs/api/checkout-extensions/post-purchase/api#calculatechangesetprocessedresult)CalculateChangesetProcessedResultReturns a `CalculatedPurchase` for processed changeset.| Name | Type | Description || errors | `[ChangesetError](#changeseterror)[]` | Empty array of errors. || status | `"processed"` | Always returns `processed`. || calculatedPurchase | `[CalculatedPurchase](#calculatedpurchase)` | Returns `CalculatedPurchase`. |### [Anchor to CalculatedPurchase](/docs/api/checkout-extensions/post-purchase/api#calculatedpurchase)CalculatedPurchaseRepresents the updated state of the initial purchase.| Name | Type | Description || subtotalPriceSet | `[MoneyBag](#moneybag)<>` | Updated total price of the purchase with discounts but before shipping, taxes, and tips. || totalPriceSet | `[MoneyBag](#moneybag)<>` | Updated final price of the purchase. || addedTaxLines | `[AddedTaxLine](#addedtaxline)[]` | Array of `AddedTaxLine`. || updatedLineItems | `[UpdatedLineItem](#updatedlineitem)[]` | Array of `UpdatedLineItem`. || addedShippingLines | `[AddedShippingLine](#addedshippingline)[]` | Array of `AddedShippingLine`. || totalOutstandingSet | `[MoneyBag](#moneybag)<>` | The amount left unpaid after the update. |### [Anchor to AddedShippingLine](/docs/api/checkout-extensions/post-purchase/api#addedshippingline)AddedShippingLineRepresents a shipping line that was added after a changeset was calculated.| Name | Type | Description || priceSet | `[MoneyBag](#moneybag)<>` | The shipping line price. || presentmentTitle | `string` | The customer facing line title. |### [Anchor to UpdatedLineItem](/docs/api/checkout-extensions/post-purchase/api#updatedlineitem)UpdatedLineItemRepresents the updated state of a line item after a changeset has been calculated including any added line items.| Name | Type | Description || totalPriceSet | `[MoneyBag](#moneybag)<>` | The discounted total price. || priceSet | `[MoneyBag](#moneybag)<>` | The price per quantity || productId | `number` | The product ID. || variantId | `number` | The variant ID. || sellingPlanId? | `number` | The selling plan ID. || productHandle | `string` | The product slug in kebab-case. || quantity | `number` | How many items are being purchased in this line. |### [Anchor to AddedTaxLine](/docs/api/checkout-extensions/post-purchase/api#addedtaxline)AddedTaxLineRepresents the information about the tax charged on the associated line item.| Name | Type | Description || priceSet | `[MoneyBag](#moneybag)<>` | The tax amount. || rate | `number` | The tax rate to be applied. || title | `string` | The name of the tax. |### [Anchor to CalculateChangesetUnprocessedResult](/docs/api/checkout-extensions/post-purchase/api#calculatechangesetunprocessedresult)CalculateChangesetUnprocessedResultReturns an array of `ChangesetError`, when the changeset can't be processed.| Name | Type | Description || errors | `[ChangesetError](#changeseterror)[]` | Array of errors. || status | `"unprocessed"` | Always returns `unprocessed`. || calculatedPurchase? | `never` | Not returned for unprocessed result. |### [Anchor to ChangesetError](/docs/api/checkout-extensions/post-purchase/api#changeseterror)ChangesetErrorRepresents an error occurred while calculating or applying a changeset.| Name | Type | Description || code | `"payment_required" | "insufficient_inventory" | "changeset_already_applied" | "unsupported_payment_method" | "invalid_request" | "server_error" | "buyer_consent_required" | "subscription_vaulting_error" | "subscription_contract_creation_error" | "subscription_no_shipping_address_error" | "subscription_limit_error" | "order_released_error"` | An error code corresponding to an error that occurred while calculating or applying a changeset.   Useful for grouping errors that can be handled similarily. || message | `string` | The error description. |### [Anchor to Changeset](/docs/api/checkout-extensions/post-purchase/api#changeset)ChangesetA list of requested changes to be made to the initial purchase.| Name | Type | Description || changes | `([AddVariantChange](#addvariantchange) | [AddShippingLineChange](#addshippinglinechange) | [SetMetafieldChange](#setmetafieldchange) | [AddSubscriptionChange](#addsubscriptionchange))[]` | A change request. |### [Anchor to AddSubscriptionChange](/docs/api/checkout-extensions/post-purchase/api#addsubscriptionchange)AddSubscriptionChangeRequests a subscription to be added to the initial purchase.| Name | Type | Description || type | `"add_subscription"` | A fixed value of "add_subscription". || variantId | `number` | The product variant to add. || sellingPlanId | `number` | The selling plan to apply. || initialShippingPrice | `number` | The shipping line price without taxes for the first shipping cycle. || recurringShippingPrice | `number` | The shipping line price without taxes for the recurring shipping cycles. || quantity | `number` | The quantity of the specified variant. || shippingOption | `[ShippingOption](#shippingoption)` | Additional information concerning shipping. || discount? | `[ExplicitDiscount](#explicitdiscount)` | Refer to [ExplicitDiscount](/docs/api/checkout-extensions/post-purchase/api#explicitdiscount). |### [Anchor to ShippingOption](/docs/api/checkout-extensions/post-purchase/api#shippingoption)ShippingOption| Name | Type | Description || title? | `string` |  || presentmentTitle? | `string` |  |### [Anchor to SetMetafieldChange](/docs/api/checkout-extensions/post-purchase/api#setmetafieldchange)SetMetafieldChangeRequests to set a metafield on the initial purchase.

If a metafield with the same namespace and key pair already exists, then its contents are replaced.| Name | Type | Description || key | `string` | The metafield key. || namespace | `string` | The metafield namespace. || value | `string | number` | The metafield value. || valueType | `"integer" | "string" | "json_string"` | The metafield value type. || type | `"set_metafield"` | A fixed value of "set_metafield". |### [Anchor to AddShippingLineChange](/docs/api/checkout-extensions/post-purchase/api#addshippinglinechange)AddShippingLineChangeRequests a shipping line to be added to the initial purchase.| Name | Type | Description || type | `"add_shipping_line"` | A fixed value of "add_shipping_line". || price | `number` | The shipping line price without taxes. || title? | `string` | The merchant-facing line title. || presentmentTitle? | `string` | The buyer-facing line title. |### [Anchor to AddVariantChange](/docs/api/checkout-extensions/post-purchase/api#addvariantchange)AddVariantChangeRequests a variant to be added to the initial purchase.| Name | Type | Description || type | `"add_variant"` | A fixed value of "add_variant". || variantId | `number` | The product variant to add. || quantity | `number` | The quantity of the specified variant. || discount? | `[ExplicitDiscount](#explicitdiscount)` | Refer to [ExplicitDiscount](/docs/api/checkout-extensions/post-purchase/api#explicitdiscount). |### [Anchor to ExplicitDiscount](/docs/api/checkout-extensions/post-purchase/api#explicitdiscount)ExplicitDiscountRequests to attach an explicit discount to a compatible change.| Name | Type | Description || value | `number` | The discount value. || valueType | `"percentage" | "fixed_amount"` | The discount type. || title | `string` | The reason for adding the discount. |### [Anchor to Storage](/docs/api/checkout-extensions/post-purchase/api#storage)StorageGeneral-purpose, key-value browser storage for extensions.| Name | Type | Description || initialData | `unknown` | Data in the storage during the first load (read-only). || update | `(data: any) => Promise<void>` | Updates the storage to the value that it's given. |### [Anchor to InputData](/docs/api/checkout-extensions/post-purchase/api#inputdata)InputDataThe data given as input to both extension points.| Name | Type | Description || extensionPoint | `string` | Identifier for the extension point. || initialPurchase | `[Purchase](#purchase)` | Initial purchase. || locale | `string` | Checkout customer locale. || shop | `[Shop](#shop)` | Shop where the checkout/order is from. || token | `string` | JWT representing the input_data payload. For more information, refer to [JWT specification](/docs/api/checkout-extensions/post-purchase/jwt-specification). || version | `string` | Post Purchase API version. |### [Anchor to Shop](/docs/api/checkout-extensions/post-purchase/api#shop)ShopThe shop where the extension is running.| Name | Type | Description || id | `number` | The shop's unique identifier. || domain | `string` | The primary domain of the shop (ending with “.myshopify.com”). || metafields | `[Metafield](#metafield)[]` | Only [public listed](/docs/storefronts/headless/building-with-the-storefront-api/products-collections/metafields#step-1-expose-metafields) metafields are available. |### [Anchor to Purchase](/docs/api/checkout-extensions/post-purchase/api#purchase)PurchaseRepresents the initial purchase's state when the extension is loaded.| Name | Type | Description || referenceId | `string` | Initial purchase's unique identifier. || customerId? | `string` | The unique identifier of the buyer. || destinationCountryCode? | `string` | The unique identifier of the country for shipping. || totalPriceSet | `[MoneyBag](#moneybag)` | The total price of the purchase, including shipping, taxes and discounts. || lineItems | `[LineItem](#lineitem)[]` | Items being purchased. |### [Anchor to LineItem](/docs/api/checkout-extensions/post-purchase/api#lineitem)LineItemThe items purchased.| Name | Type | Description || product | `[Product](#product)` | Product being purchased. || quantity | `number` | The amount of items for the line. || totalPriceSet | `[MoneyBag](#moneybag)<>` | The total price of the line item, with line discounts. || sellingPlanId? | `number` | The selling plan's unique identifier |### [Anchor to Product](/docs/api/checkout-extensions/post-purchase/api#product)ProductThe product for purchase.| Name | Type | Description || id | `number` | The product's unique identifier. || title | `string` | The product title. || variant | `[Variant](#variant)` | Variant being purchased. || metafields | `[Metafield](#metafield)<>[]` | Only [public listed](/docs/storefronts/headless/building-with-the-storefront-api/products-collections/metafields#step-1-expose-metafields) metafields are available. |### [Anchor to Variant](/docs/api/checkout-extensions/post-purchase/api#variant)VariantThe product variant for purchase.| Name | Type | Description || id | `number` | The variant's unique identifier. || title | `string` | The variant title. || metafields | `[Metafield](#metafield)<>[]` | Only [public listed](/docs/storefronts/headless/building-with-the-storefront-api/products-collections/metafields#step-1-expose-metafields) metafields are available. |### [Anchor to Metafield](/docs/api/checkout-extensions/post-purchase/api#metafield)MetafieldThe metafields associated with a resource.

You'll need to individually request which metafields you need in the [configuration file](/docs/api/checkout-extensions/post-purchase#configuration-file).| Name | Type | Description || key | `string` | The metafield key. || namespace | `string` | The metafield namespace. || value | `string | number` | The metafield value. || valueType | `"integer" | "string" | "json_string"` | The metafield value type. |### [Anchor to MoneyBag](/docs/api/checkout-extensions/post-purchase/api#moneybag)MoneyBagRepresents an amount in both shop and presentment currencies.| Name | Type | Description || shopMoney | `[Money](#money)` | Amount in shop currency. || presentmentMoney | `[Money](#money)` | Amount in presentment currency. |### [Anchor to Money](/docs/api/checkout-extensions/post-purchase/api#money)MoneyA list of requested changes to be made to the initial purchase.| Name | Type | Description || amount | `string` | The actual amount. || currencyCode | `string` | In ISO 4217 format. |

Was this page helpful?YesNo### Updates- [Developer changelog](/changelog)- [Shopify Editions](https://www.shopify.com/editions)### Business growth- [Shopify Partners Program](https://www.shopify.com/partners?shpxid=222dd762-CA08-48FF-E4D4-FF926B8FFCAD)- [Shopify App Store](https://apps.shopify.com/?shpxid=222dd762-CA08-48FF-E4D4-FF926B8FFCAD)- [Shopify Academy](https://www.shopifyacademy.com/page/catalog#role_developer?utm_source=web_dotdev&utm_medium=footer_businessgrowth)### Legal- [Terms of service](https://www.shopify.com/legal/terms?shpxid=222dd762-CA08-48FF-E4D4-FF926B8FFCAD)- [API terms of use](https://www.shopify.com/legal/api-terms?shpxid=222dd762-CA08-48FF-E4D4-FF926B8FFCAD)- [Privacy policy](https://www.shopify.com/legal/privacy?shpxid=222dd762-CA08-48FF-E4D4-FF926B8FFCAD)- [Partners Program Agreement](https://www.shopify.com/partners/terms?shpxid=222dd762-CA08-48FF-E4D4-FF926B8FFCAD)### Shopify- [About Shopify](https://www.shopify.com/about?shpxid=222dd762-CA08-48FF-E4D4-FF926B8FFCAD)- [Shopify Plus](https://www.shopify.com/plus?shpxid=222dd762-CA08-48FF-E4D4-FF926B8FFCAD)- [Careers](https://www.shopify.com/careers?shpxid=222dd762-CA08-48FF-E4D4-FF926B8FFCAD)- [Investors](https://investors.shopify.com/home/default.aspx?shpxid=222dd762-CA08-48FF-E4D4-FF926B8FFCAD)- [Press and media](https://shopify.com/news?shpxid=7db0d4e4-24E8-4087-58FA-7EE470CA745A)